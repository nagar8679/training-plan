<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>××¤×œ×™×§×¦×™×™×ª ××™××•× ×™× â€“ ×“×©×‘×•×¨×“ ××œ×</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      --bg-main: #020617;
      --bg-card: #020617;
      --bg-card-soft: #0b1220;
      --accent: #f97316;
      --accent-2: #38bdf8;
      --accent-3: #22c55e;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1e293b;
      --shadow-soft: 0 20px 50px rgba(0,0,0,0.75);
      --radius-lg: 18px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
    }
<!-- ğŸ” ××–×•×¨ ×”×ª×—×‘×¨×•×ª -->
<div id="auth-panel" style="padding:16px; background:#111827; color:#e5e7eb; border-bottom:1px solid #1f2937;">
  <h2 style="margin:0 0 8px;">×”×ª×—×‘×¨×•×ª</h2>

  <!-- ×”×•×“×¢×•×ª ×©×’×™××”/××¦×‘ -->
  <div id="auth-message" style="color:#f97373; margin-bottom:8px; font-size:14px;"></div>

  <!-- ××™××™×™×œ + ×¡×™×¡××” -->
  <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:8px;">
    <input id="email-input" type="email" placeholder="××™××™×™×œ"
           style="padding:6px 8px; border-radius:4px; border:1px solid #374151; background:#020617; color:#e5e7eb;">
    <input id="password-input" type="password" placeholder="×¡×™×¡××”"
           style="padding:6px 8px; border-radius:4px; border:1px solid #374151; background:#020617; color:#e5e7eb;">
    <button id="login-email-btn"
            style="padding:6px 10px; border-radius:4px; border:none; background:#22c55e; color:#020617; cursor:pointer;">
      ×”×ª×—×‘×¨×•×ª
    </button>
    <button id="register-email-btn"
            style="padding:6px 10px; border-radius:4px; border:1px solid #22c55e; background:transparent; color:#bbf7d0; cursor:pointer;">
      ×”×¨×©××”
    </button>
  </div>

  <!-- ×’×•×’×œ / ×× ×•× ×™××™ -->
  <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px;">
    <button id="google-btn"
            style="padding:6px 10px; border-radius:4px; border:none; background:#f97316; color:#020617; cursor:pointer;">
      ×”×ª×—×‘×¨ ×¢× Google
    </button>
    <button id="guest-btn"
            style="padding:6px 10px; border-radius:4px; border:1px solid #6b7280; background:transparent; color:#e5e7eb; cursor:pointer;">
      ×”××©×š ×›××•×¨×—
    </button>
  </div>

  <!-- ××¦×‘ ××©×ª××© -->
  <div style="display:flex; justify-content:space-between; align-items:center; font-size:14px;">
    <span id="user-info">×œ× ××—×•×‘×¨</span>
    <button id="logout-btn"
            style="padding:4px 8px; border-radius:4px; border:none; background:#ef4444; color:#fee2e2; cursor:pointer; display:none;">
      ×”×ª× ×ª×§
    </button>
  </div>
</div>

    a { color: inherit; text-decoration: none; }

    .app-shell {
      max-width: 1240px;
      margin: 0 auto;
      padding: 10px 10px 32px;
      display: grid;
      grid-template-columns: 220px 1fr;
      gap: 14px;
    }

    @media (max-width: 900px) {
      .app-shell {
        grid-template-columns: 1fr;
      }
    }

    /* ===== SIDE NAV ===== */
    .side-nav {
      background: radial-gradient(circle at top left, #020617, #020617 50%, #020617);
      border-radius: var(--radius-lg);
      padding: 14px 12px;
      border: 1px solid rgba(30,64,175,0.7);
      box-shadow: var(--shadow-soft);
      position: sticky;
      top: 10px;
      height: fit-content;
    }

    .side-nav-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .brand-logo {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: conic-gradient(from 210deg, #f97316, #facc15, #22c55e, #f97316);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 2px #020617, 0 0 20px rgba(249,115,22,0.7);
      font-weight: 800;
      color: #020617;
      font-size: 16px;
    }

    .side-nav-title h1 {
      margin: 0;
      font-size: 16px;
    }

    .side-nav-title h1 span {
      color: var(--accent);
    }

    .side-nav-title p {
      margin: 0;
      font-size: 11px;
      color: var(--text-muted);
    }

    .nav-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-muted);
      margin: 8px 0 4px;
    }

    .nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 13px;
    }

    .nav-item {
      border-radius: 999px;
      padding: 6px 10px;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      color: var(--text-main);
      border: 1px solid transparent;
      transition: 0.15s ease-out;
    }

    .nav-item span.icon {
      font-size: 14px;
    }

    .nav-item.active {
      background: radial-gradient(circle at top left, #f97316, #ea580c);
      color: #020617;
      border-color: rgba(15,23,42,0.95);
      box-shadow: 0 0 0 1px rgba(15,23,42,0.9), 0 0 20px rgba(249,115,22,0.7);
      font-weight: 600;
    }

    .nav-item:hover:not(.active) {
      background: rgba(15,23,42,0.9);
      border-color: rgba(30,64,175,0.8);
    }

    .nav-footer {
      border-top: 1px solid #111827;
      margin-top: 10px;
      padding-top: 8px;
      font-size: 10px;
      color: var(--text-muted);
    }

    /* ===== MAIN CONTENT ===== */
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .top-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .top-title h2 {
      margin: 0;
      font-size: 18px;
    }

    .top-title p {
      margin: 0;
      font-size: 11px;
      color: var(--text-muted);
    }

    .top-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-end;
    }

    .pill-stat {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.8);
      background: radial-gradient(circle at top, #020617, #020617 55%, #020617);
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: #e5e7eb;
    }

    .pill-stat span.icon {
      font-size: 13px;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .card {
      background: radial-gradient(circle at top left, #020617, #020617 60%, #020617);
      border-radius: var(--radius-lg);
      padding: 12px 12px 14px;
      border: 1px solid rgba(30,64,175,0.75);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(248,113,113,0.14), transparent 60%);
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 10px;
    }

    .badge-live {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(22,163,74,0.16);
      border: 1px solid rgba(22,163,74,0.7);
      color: #bbf7d0;
      font-size: 11px;
      white-space: nowrap;
    }

    .badge-live span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,0.35);
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .meta-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(55,65,81,0.85);
      color: #cbd5f5;
    }

    .meta-pill span.icon {
      font-size: 13px;
    }

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 11px;
    }

    .controls-row label {
      color: #e5e7eb;
      font-weight: 500;
    }

    input[type="date"] {
      background: #020617;
      border-radius: 10px;
      border: 1px solid #1e293b;
      color: #e5e7eb;
      padding: 4px 8px;
      font-size: 11px;
      min-width: 140px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 5px 10px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .btn-main {
      background: var(--accent);
      color: #020617;
      box-shadow: 0 0 0 1px rgba(15,23,42,0.9), 0 0 18px rgba(249,115,22,0.7);
    }

    .btn-main:hover {
      background: #ea580c;
    }

    .btn-ghost {
      background: rgba(15,23,42,0.96);
      color: var(--text-main);
      border: 1px solid rgba(55,65,81,0.9);
    }

    .btn-ghost:hover {
      border-color: rgba(96,165,250,0.9);
    }

    .btn-danger {
      background: rgba(220,38,38,0.96);
      color: #fee2e2;
      box-shadow: 0 0 0 1px rgba(127,29,29,0.9);
    }

    .btn-danger:hover {
      background: #b91c1c;
    }

    .day-strip {
      margin: 8px 0 10px;
      padding: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(15,23,42,0.98), rgba(15,23,42,0.98));
      border: 1px solid rgba(30,64,175,0.6);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .day-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .day-button {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 5px 12px;
      font-size: 12px;
      cursor: pointer;
      background: transparent;
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: 0.15s ease-out;
    }

    .day-button span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #475569;
    }

    .day-button.active {
      background: var(--accent);
      color: #020617;
      border-color: rgba(15,23,42,0.9);
      box-shadow: 0 0 0 1px rgba(15,23,42,0.9), 0 0 16px rgba(249,115,22,0.7);
    }

    .day-button.active span.dot {
      background: #020617;
    }

    .week-label {
      font-size: 11px;
      color: var(--text-muted);
    }

    .week-label span {
      color: var(--accent);
      font-weight: 600;
    }

    .info-text {
      font-size: 10px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(260px, 1.3fr);
      gap: 10px;
    }

    @media (max-width: 900px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    /* TABLE */
    .table-wrapper {
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #111827;
      background: radial-gradient(circle at top, rgba(15,23,42,0.98), rgba(15,23,42,0.98));
      margin-bottom: 8px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
    }

    thead {
      background: #020617;
    }

    th, td {
      padding: 6px 6px;
      border-bottom: 1px solid rgba(31,41,55,0.9);
      text-align: center;
    }

    th {
      font-weight: 600;
      color: #cbd5f5;
      letter-spacing: 0.02em;
      background: linear-gradient(90deg, rgba(15,23,42,0.98), rgba(15,23,42,0.92));
    }

    tbody tr:nth-child(even) td { background: rgba(15,23,42,0.96); }
    tbody tr:nth-child(odd) td { background: rgba(15,23,42,0.98); }

    tbody tr:hover td {
      background: rgba(30,64,175,0.42);
    }

    td.name-col {
      text-align: right;
      font-weight: 500;
      font-size: 11px;
      color: #e5e7eb;
    }

    td.muscle-col {
      color: #c4b5fd;
      white-space: nowrap;
    }

    .badge-muscle {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(30,64,175,0.22);
      border: 1px solid rgba(59,130,246,0.6);
      font-size: 10px;
    }

    .badge-muscle span.dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: rgba(59,130,246,0.9);
    }

    .sets-dots {
      display: inline-flex;
      gap: 3px;
      justify-content: center;
    }

    .set-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      border: 1px solid #9ca3af;
      background: transparent;
      cursor: pointer;
    }

    .set-dot.active {
      background: var(--accent-3);
      border-color: #bbf7d0;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.7);
    }

    input[type="number"], input[type="text"] {
      width: 100%;
      max-width: 120px;
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2937;
      color: var(--text-main);
      font-size: 11px;
      padding: 3px 6px;
    }

    input[type="number"]::placeholder,
    input[type="text"]::placeholder {
      color: #6b7280;
    }

    input[type="number"]:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.45);
    }

    /* SIDE CARDS */
    .side-column {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .side-card {
      background: radial-gradient(circle at top right, #020617, #020617 55%, #020617);
      border-radius: var(--radius-lg);
      padding: 10px 10px 11px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(59,130,246,0.6);
      position: relative;
      overflow: hidden;
    }

    .side-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(56,189,248,0.2), transparent 60%);
      pointer-events: none;
    }

    .side-card-inner { position: relative; z-index: 1; }

    .side-card h3 {
      margin: 0 0 4px;
      font-size: 13px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 5px;
    }

    .chip {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.98);
      color: #e5e7eb;
    }

    .tips-list {
      list-style: none;
      padding-right: 16px;
      margin: 0;
      font-size: 11px;
      color: #e5e7eb;
    }

    .tips-list li::before {
      content: "â€¢ ";
      color: var(--accent);
    }

    .tips-list li {
      margin-bottom: 3px;
    }

    .footer-note {
      text-align: center;
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .history-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 11px;
      max-height: 150px;
      overflow-y: auto;
    }

    .history-item {
      border-radius: 8px;
      padding: 4px 6px;
      border: 1px solid #111827;
      background: rgba(15,23,42,0.92);
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .history-item span.label {
      color: #e5e7eb;
    }

    .history-item span.meta {
      color: var(--text-muted);
    }

    /* WORKOUT MODE */
    .workout-layout {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(260px, 1.3fr);
      gap: 10px;
    }
    @media (max-width: 900px) {
      .workout-layout { grid-template-columns: 1fr; }
    }

    .workout-main-title {
      font-size: 14px;
      margin: 0 0 6px;
    }

    .workout-ex-name {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 4px;
    }

    .workout-ex-muscle {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .workout-sets {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 12px;
      margin-bottom: 6px;
    }

    .workout-sets span.tag {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      background: rgba(15,23,42,0.96);
    }

    .workout-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .timer-display {
      font-size: 18px;
      font-weight: 600;
      color: var(--accent-2);
    }

    .workout-steps {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .workout-list {
      font-size: 11px;
      max-height: 220px;
      overflow-y: auto;
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .workout-list-item {
      padding: 4px 6px;
      border-radius: 8px;
      border: 1px solid #111827;
      background: rgba(15,23,42,0.95);
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .workout-list-item.active {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.55);
    }

    /* EXERCISE LIBRARY */
    .exercise-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 8px;
      font-size: 12px;
    }

    .exercise-card {
      border-radius: 12px;
      padding: 8px;
      border: 1px solid #111827;
      background: radial-gradient(circle at top, #020617, #020617 65%, #020617);
    }

    .exercise-card h4 {
      margin: 0 0 2px;
      font-size: 13px;
    }

    .exercise-card .muscle {
      font-size: 11px;
      color: var(--accent-2);
      margin-bottom: 4px;
    }

    .exercise-card p {
      margin: 0;
      font-size: 11px;
      color: var(--text-muted);
    }

    /* HISTORY PAGE */
    .history-group {
      margin-bottom: 6px;
      border-radius: 10px;
      border: 1px solid #111827;
      background: rgba(15,23,42,0.96);
      padding: 6px 8px;
      font-size: 11px;
    }

    .history-group-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    .history-group-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .history-group-list li {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 2px;
      color: var(--text-muted);
    }

    /* PR PAGE */
    .pr-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 8px;
      font-size: 12px;
    }

    .pr-card {
      border-radius: 12px;
      padding: 8px;
      border: 1px solid #111827;
      background: radial-gradient(circle at top, #020617, #020617 60%, #020617);
    }

    .pr-card h4 {
      margin: 0 0 2px;
      font-size: 13px;
    }

    .pr-value {
      font-size: 14px;
      font-weight: 600;
      color: var(--accent-3);
    }

    .pr-meta {
      font-size: 11px;
      color: var(--text-muted);
    }

    /* SETTINGS */
    .settings-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 12px;
      margin-bottom: 6px;
    }

    .settings-row label {
      font-weight: 500;
    }

    select {
      background: #020617;
      border-radius: 999px;
      border: 1px solid #1f2937;
      color: #e5e7eb;
      font-size: 12px;
      padding: 4px 8px;
    }

    select:focus {
      outline: none;
      border-color: var(--accent-2);
      box-shadow: 0 0 0 1px rgba(56,189,248,0.6);
    }

    .small-note {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* EXPORT BUTTONS */
    .export-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
      font-size: 11px;
    }

  </style>
</head>
<body>
  <div class="app-shell">
    <!-- SIDE NAV -->
    <aside class="side-nav">
      <div class="side-nav-header">
        <div class="brand-logo">TP</div>
        <div class="side-nav-title">
          <h1><span>Training</span> Planner</h1>
          <p>××¢×¨×›×ª ××œ××” ×œ××¢×§×‘ ××™××•× ×™ ×›×•×—</p>
        </div>
      </div>

      <div class="nav-section-title">× ×™×•×•×˜</div>
      <ul class="nav-list">
        <li class="nav-item active" data-page="dashboard">
          <span class="icon">ğŸ“Š</span> ×“×©×‘×•×¨×“ ×™×•××™
        </li>
        <li class="nav-item" data-page="workout">
          <span class="icon">ğŸ‹ï¸â€â™‚ï¸</span> ××¦×‘ ××™××•×Ÿ
        </li>
        <li class="nav-item" data-page="library">
          <span class="icon">ğŸ“˜</span> ×¡×¤×¨×™×™×ª ×ª×¨×’×™×œ×™×
        </li>
        <li class="nav-item" data-page="history">
          <span class="icon">ğŸ“…</span> ×™×•××Ÿ ××™××•× ×™×
        </li>
        <li class="nav-item" data-page="prs">
          <span class="icon">ğŸ…</span> ×©×™××™× ××™×©×™×™×
        </li>
        <li class="nav-item" data-page="settings">
          <span class="icon">âš™ï¸</span> ×”×’×“×¨×•×ª
        </li>
      </ul>

      <div class="nav-footer">
        ×›×œ ×”× ×ª×•× ×™× × ×©××¨×™× ×›×¨×’×¢ ×‘×“×¤×“×¤×Ÿ ×©×œ×š (localStorage).  
        ×‘×©×œ×‘ ×”×‘× ××¤×©×¨ ×œ×—×‘×¨ ×œ×©××™×¨×” ×‘×¢× ×Ÿ (Firebase) ×›×“×™ ×œ×¢×‘×•×“ ××›×œ ××›×©×™×¨.
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <div class="top-bar">
        <div class="top-title">
          <h2 id="mainPageTitle">×“×©×‘×•×¨×“ ××™××•× ×™× ×©×‘×•×¢×™</h2>
          <p id="mainPageSubtitle">××¢×§×‘ ××©×§×œ×™×, ×¡×˜×™× ×•×”×ª×§×“××•×ª ×œ××•×¨×š ×–××Ÿ.</p>
        </div>
        <div class="top-pills">
          <div class="pill-stat"><span class="icon">ğŸ“†</span>6 ×™××™ ××™××•×Ÿ ×‘×©×‘×•×¢</div>
          <div class="pill-stat"><span class="icon">ğŸ“ˆ</span>××˜×¨×”: ×¢×œ×™×™×” ×”×“×¨×’×ª×™×ª ×‘×¢×•××¡</div>
          <div class="pill-stat"><span class="icon">ğŸ’¾</span>× ×©××¨ ××•×˜×•××˜×™×ª ×‘××›×©×™×¨ ×©×œ×š</div>
        </div>
      </div>

      <!-- DASHBOARD PAGE -->
      <section id="dashboard" class="page active">
        <div class="day-strip">
          <div class="day-buttons" id="dayButtons"></div>
          <div class="week-label">
            ×©×‘×•×¢ × ×•×›×—×™: <span>××¡×” / ×”×•×¨×“×ª ××—×•×– ×©×•××Ÿ</span><br />
            ×‘×—×¨ ×™×•×, ×¨×©×•× ××©×§×œ×™× â€“ ×”××¢×¨×›×ª ×ª×‘× ×” ×¢×‘×•×¨×š ×”×™×¡×˜×•×¨×™×” ×•×’×¨×£.
          </div>
        </div>

        <div class="grid-2">
          <section class="card">
            <div class="card-inner">
              <div class="card-header">
                <div>
                  <h3 id="dayTitle" style="margin:0;font-size:15px;">×™×•× ×¨××©×•×Ÿ â€“ ×—×–×” + ×›×ª×¤×™×™× + ×™×“ ××—×•×¨×™×ª</h3>
                  <p id="daySubtitle" style="margin:2px 0 0;font-size:11px;color:#fb923c;">
                    ×—×–×” ×›×‘×“ + ×›×ª×£ ×§×“××™×ª/×××¦×¢×™×ª + ×˜×¨×™×™×¡×¤×¡
                  </p>
                </div>
                <div class="badge-live">
                  <span class="dot"></span> ××™××•×Ÿ ×¤×¢×™×œ â€“ ×“×©×‘×•×¨×“
                </div>
              </div>

              <div class="meta-row">
                <div class="meta-pill"><span class="icon">ğŸ‹ï¸â€â™‚ï¸</span>×ª×¨×’×™×œ×™ ×‘×¡×™×¡ + ×‘×™×“×•×“</div>
                <div class="meta-pill"><span class="icon">â±</span>×× ×•×—×•×ª: 2â€“3 ×“×§' ×‘×¡×™×¡ / 60â€“90 ×©× ' ×‘×™×“×•×“</div>
                <div class="meta-pill"><span class="icon">ğŸ¯</span>×©××•×¨ ××©×§×œ×™× ××—×¨×™ ×›×œ ××™××•×Ÿ</div>
              </div>

              <div class="controls-row">
                <label for="workoutDate">×ª××¨×™×š ××™××•×Ÿ:</label>
                <input type="date" id="workoutDate" />
                <button class="btn btn-danger" id="resetDayBtn">ğŸ§¹ ××™×¤×•×¡ × ×ª×•× ×™ ×”×™×•×</button>
                <button class="btn btn-main" id="goWorkoutModeBtn">ğŸ‹ï¸â€â™‚ï¸ ××¢×‘×¨ ×œ××¦×‘ ××™××•×Ÿ</button>
              </div>

              <p class="info-text">
                ×›×œ ××©×§×œ/×”×¢×¨×” ×©××ª×” ××–×™×Ÿ × ×©××¨×™× ××•×˜×•××˜×™×ª ×œ×¤×™ ×™×•× ×•×ª××¨×™×š.  
                ×”×”×™×¡×˜×•×¨×™×” ××©××©×ª ×œ×’×¨×£, ×™×•××Ÿ ××™××•× ×™× ×•×©×™××™× ××™×©×™×™× (PRs).
              </p>

              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>×ª×¨×’×™×œ</th>
                      <th>×¡×˜×™× Ã— ×—×–×¨×•×ª</th>
                      <th>×§×‘×•×¦×ª ×©×¨×™×¨</th>
                      <th>×¡×˜×™× ×©×‘×•×¦×¢×•</th>
                      <th>××©×§×œ (×§×´×’)</th>
                      <th>×”×¢×¨×•×ª</th>
                    </tr>
                  </thead>
                  <tbody id="exerciseTableBody"></tbody>
                </table>
              </div>

              <h4 style="margin:6px 0 4px;font-size:12px;">×™×•××Ÿ ××™××•× ×™× ×œ×™×•× ×”× ×•×›×—×™</h4>
              <ul class="history-list" id="dayHistoryList"></ul>
            </div>
          </section>

          <aside class="side-column">
            <section class="side-card">
              <div class="side-card-inner">
                <h3>×˜×™×¤×™× ×—×©×•×‘×™× ×œ×”×ª×§×“××•×ª</h3>
                <div class="chip-row">
                  <div class="chip">Progressive Overload</div>
                  <div class="chip">×˜×›× ×™×§×” ×œ×¤× ×™ ××©×§×œ</div>
                  <div class="chip">×©×™× ×” ×•×ª×–×•× ×”</div>
                </div>
                <ul class="tips-list">
                  <li>××˜×¨×”: ×œ×¢×œ×•×ª ×‘×¢×•××¡ (××©×§×œ/×—×–×¨×•×ª/×¡×˜×™×) ×›×œ 1â€“2 ×©×‘×•×¢×•×ª ×‘×¦×•×¨×” ×—×›××”.</li>
                  <li>×‘×ª×¨×’×™×œ×™ ×‘×¡×™×¡ â€“ ×©×œ×™×˜×”, ×œ× ×œ×–×¨×•×§ ××©×§×œ. ×× ×”×˜×›× ×™×§×” × ×©×‘×¨×ª, ×œ×”×•×¨×™×“ ××©×§×œ.</li>
                  <li>×œ×”×©××™×¨ 1â€“3 ×—×–×¨×•×ª ×‘×¨×–×¨×‘×” ×‘×¨×•×‘ ×”×¡×˜×™× â€“ ×œ× ×—×™×™×‘×™× ×›×™×©×œ×•×Ÿ ×‘×›×œ ×¡×˜.</li>
                  <li>×—×œ×‘×•×Ÿ 1.6â€“2 ×’×¨× ×œ×›×œ ×§×´×’ ××©×§×œ ×’×•×£ + 2â€“3 ×œ×™×˜×¨ ××™× ×‘×™×•×.</li>
                  <li>×©×™× ×” ×˜×•×‘×” ×ª×™×ª×Ÿ ×™×•×ª×¨ ×ª×•×¦××•×ª ××¢×•×“ ×¡×˜ ××—×“ ×‘×¡×•×£ ××™××•×Ÿ ×©××ª×” ×’××•×¨ ×‘×•.</li>
                </ul>
                <p class="footer-note">
                  ×¢×§×‘×™×•×ª + ××¢×§×‘ ××¡×•×“×¨ = ×”×ª×§×“××•×ª.  
                  ×”××ª×¨ ×¨×§ ×¢×•×–×¨ ×œ×š ×œ×”×™×•×ª ××¡×•×“×¨ â€“ ×”×¢×‘×•×“×” ×‘×—×“×¨ ×”×›×•×©×¨ ğŸ’ª
                </p>
              </div>
            </section>

            <section class="side-card">
              <div class="side-card-inner">
                <h3>×’×¨×£ ×”×ª×§×“××•×ª â€“ ×œ×¤×™ ×ª×¨×’×™×œ</h3>
                <div class="controls-row" style="margin-bottom:4px;">
                  <label for="exerciseSelect">×‘×—×¨ ×ª×¨×’×™×œ ×œ×’×¨×£:</label>
                  <select id="exerciseSelect"></select>
                </div>
                <canvas id="progressChart" height="150"></canvas>
                <p class="small-note">
                  ×”×’×¨×£ ××¦×™×’ ××©×§×œ×™× ×œ××•×¨×š ×–××Ÿ ×¢×‘×•×¨ ×”×ª×¨×’×™×œ ×©× ×‘×—×¨ â€“ ×œ×¤×™ ×ª××¨×™×š ×”××™××•×Ÿ.
                </p>
              </div>
            </section>
          </aside>
        </div>
      </section>

      <!-- WORKOUT MODE PAGE -->
      <section id="workout" class="page">
        <section class="card">
          <div class="card-inner">
            <div class="card-header">
              <div>
                <h3 class="workout-main-title">××¦×‘ ××™××•×Ÿ â€“ ×‘×™×¦×•×¢ ×¡×˜×™× ×‘×–××Ÿ ×××ª</h3>
                <p style="margin:0;font-size:11px;color:#fb923c;">
                  ×‘×—×¨ ×™×•×, ×”×ª×—×œ ××™××•×Ÿ, ×¡××Ÿ ×¡×˜×™×, ×”×©×ª××© ×‘×˜×™×™××¨ ×× ×•×—×” ×•×”××¢×¨×›×ª ×ª×©××•×¨ ×œ×š ×”×›×œ.
                </p>
              </div>
              <div class="badge-live">
                <span class="dot"></span> ××¦×‘ ××™××•×Ÿ ×¤×¢×™×œ
              </div>
            </div>

            <div class="workout-layout">
              <div>
                <div class="controls-row">
                  <label>×™×•×:</label>
                  <select id="workoutDaySelect"></select>

                  <label>×ª××¨×™×š:</label>
                  <input type="date" id="workoutModeDate" />
                </div>

                <hr style="border:none;border-top:1px solid #111827;margin:6px 0;" />

                <div id="workoutCurrentContainer">
                  <p class="workout-ex-name" id="workoutExName">×œ× × ×‘×—×¨ ×ª×¨×’×™×œ ×¢×“×™×™×Ÿ</p>
                  <p class="workout-ex-muscle" id="workoutExMuscle"></p>
                  <div class="workout-sets">
                    <span class="tag" id="workoutSetsRepsTag">×¡×˜×™× Ã— ×—×–×¨×•×ª</span>
                    <span class="tag" id="workoutIndexTag">×ª×¨×’×™×œ 1 ××ª×•×š X</span>
                  </div>

                  <div class="workout-controls">
                    <label>×¡×˜ × ×•×›×—×™:</label>
                    <span id="currentSetLabel">1</span>
                    <button class="btn btn-main" id="finishSetBtn">âœ” ×¡×™×™××ª×™ ×¡×˜</button>
                    <button class="btn btn-ghost" id="nextExerciseBtn">â­ ×ª×¨×’×™×œ ×”×‘×</button>
                  </div>

                  <div class="workout-controls">
                    <label>××©×§×œ × ×•×›×—×™ (×§×´×’):</label>
                    <input type="number" id="workoutWeightInput" step="0.5" style="max-width:90px;" />
                    <button class="btn btn-ghost" id="saveWorkoutWeightBtn">ğŸ’¾ ×©××•×¨ ××©×§×œ</button>
                  </div>

                  <div class="workout-controls">
                    <label>×˜×™×™××¨ ×× ×•×—×” (×©× ×™×•×ª):</label>
                    <select id="restSelect">
                      <option value="60">60</option>
                      <option value="90" selected>90</option>
                      <option value="120">120</option>
                    </select>
                    <button class="btn btn-main" id="startRestBtn">â± ×”×ª×—×œ ×× ×•×—×”</button>
                    <span class="timer-display" id="restTimerDisplay">00:00</span>
                  </div>

                  <p class="workout-steps">
                    1. ×‘×—×¨ ×™×•× ×•×ª××¨×™×š.  
                    2. ×‘×—×¨ ×ª×¨×’×™×œ ××”×¦×“ ××• ×œ×—×¥ â€œ×ª×¨×’×™×œ ×”×‘×â€.  
                    3. ×¢×“×›×Ÿ ××©×§×œ, ×œ×—×¥ â€œ×¡×™×™××ª×™ ×¡×˜â€, ×•×”×©×ª××© ×‘×˜×™×™××¨ ×× ×•×—×”.  
                    4. ×”×›×œ × ×©××¨ ×œ×˜×‘×œ×”, ×œ×”×™×¡×˜×•×¨×™×” ×•×œ×©×™××™×.
                  </p>
                </div>
              </div>

              <aside class="side-card">
                <div class="side-card-inner">
                  <h3>×¨×©×™××ª ×”×ª×¨×’×™×œ×™× ×œ×™×•× ×”× ×•×›×—×™</h3>
                  <ul class="workout-list" id="workoutExerciseList"></ul>
                  <p class="small-note">
                    ×œ×—×¥ ×¢×œ ×ª×¨×’×™×œ ×‘×¨×©×™××” ×›×“×™ ×œ×¢×‘×•×¨ ××œ×™×•.  
                    ×©×“×•×ª ×”××©×§×œ ×•×”×¡×˜×™× ××¡×•× ×›×¨× ×™× ×¢× ×”×“×©×‘×•×¨×“ ×”×¨××©×™.
                  </p>
                </div>
              </aside>
            </div>
          </div>
        </section>
      </section>

      <!-- EXERCISE LIBRARY PAGE -->
      <section id="library" class="page">
        <section class="card">
          <div class="card-inner">
            <div class="card-header">
              <div>
                <h3 style="margin:0;font-size:15px;">×¡×¤×¨×™×™×ª ×ª×¨×’×™×œ×™×</h3>
                <p style="margin:2px 0 0;font-size:11px;color:#fb923c;">
                  ×›×œ ×”×ª×¨×’×™×œ×™× ××”×ª×•×›× ×™×ª ×©×œ×š â€“ ×¢× ×§×‘×•×¦×ª ×©×¨×™×¨ ×•×”×¡×‘×¨ ×§×¦×¨ ×œ×‘×™×¦×•×¢.
                </p>
              </div>
            </div>

            <div class="exercise-grid" id="exerciseLibraryGrid"></div>
          </div>
        </section>
      </section>

      <!-- HISTORY PAGE -->
      <section id="history" class="page">
        <section class="card">
          <div class="card-inner">
            <div class="card-header">
              <div>
                <h3 style="margin:0;font-size:15px;">×™×•××Ÿ ××™××•× ×™× ××œ×</h3>
                <p style="margin:2px 0 0;font-size:11px;color:#fb923c;">
                  ×›×œ ×”××™××•× ×™× ×©×œ×š ×œ×¤×™ ×ª××¨×™×š, ×™×•× ×•×ª×¨×’×™×œ â€“ × ×‘× ×” ××•×˜×•××˜×™×ª ××”× ×ª×•× ×™×.
                </p>
              </div>
            </div>

            <div class="export-row">
              <button class="btn btn-main" id="exportCsvBtn">ğŸ“Š ×™×™×¦×•× ×œ××§×¡×œ (CSV)</button>
              <span class="small-note">
                ×”×§×•×‘×¥ ×™×›×™×œ: ×™×•×, ×ª××¨×™×š, ×ª×¨×’×™×œ, ××©×§×œ ×•×©×¢×” ×©× ×©××¨.
              </span>
            </div>

            <div id="historyContainer"></div>
          </div>
        </section>
      </section>

      <!-- PRS PAGE -->
      <section id="prs" class="page">
        <section class="card">
          <div class="card-inner">
            <div class="card-header">
              <div>
                <h3 style="margin:0;font-size:15px;">×©×™××™× ××™×©×™×™× (PRs)</h3>
                <p style="margin:2px 0 0;font-size:11px;color:#fb923c;">
                  ×œ×›×œ ×ª×¨×’×™×œ â€“ ×”××©×§×œ ×”×›×™ ×’×‘×•×” ×©×¢×©×™×ª ××™ ×¤×¢× + ×ª××¨×™×š ×”×©×™×.
                </p>
              </div>
            </div>

            <div class="pr-grid" id="prGrid"></div>
          </div>
        </section>
      </section>

      <!-- SETTINGS PAGE -->
      <section id="settings" class="page">
        <section class="card">
          <div class="card-inner">
            <div class="card-header">
              <div>
                <h3 style="margin:0;font-size:15px;">×”×’×“×¨×•×ª</h3>
                <p style="margin:2px 0 0;font-size:11px;color:#fb923c;">
                  ×©×œ×™×˜×” ×¢×œ ×–×× ×™ ×× ×•×—×”, ×¢×™×¦×•×‘ ×‘×¡×™×¡×™ ×•××™×¤×•×¡ × ×ª×•× ×™×.
                </p>
              </div>
            </div>

            <div class="settings-row">
              <label for="defaultRestSelect">×–××Ÿ ×× ×•×—×” ×‘×¨×™×¨×ª ××—×“×œ (××¦×‘ ××™××•×Ÿ):</label>
              <select id="defaultRestSelect">
                <option value="60">60 ×©× ×™×•×ª</option>
                <option value="90">90 ×©× ×™×•×ª</option>
                <option value="120">120 ×©× ×™×•×ª</option>
              </select>
            </div>
            <p class="small-note">
              ×”×”×’×“×¨×” ×”×–×• ×ª×©×¤×™×¢ ×¢×œ ×”×˜×™×™××¨ ×‘××¦×‘ ××™××•×Ÿ. × ×™×ª×Ÿ ×œ×©× ×•×ª ×’× ××©× ×™×“× ×™×ª.
            </p>

            <hr style="border:none;border-top:1px solid #111827;margin:10px 0;">

            <div class="settings-row">
              <button class="btn btn-danger" id="resetAllDataBtn">ğŸ§¨ ××™×¤×•×¡ ×›×œ ×”× ×ª×•× ×™× (×›×œ ×”×™××™× ×•×”×ª××¨×™×›×™×)</button>
            </div>
            <p class="small-note">
              ×¤×¢×•×œ×” ×–×• ×ª××—×§ ××ª ×›×œ ×”××©×§×œ×™×, ×”×”×¢×¨×•×ª, ×”×”×™×¡×˜×•×¨×™×” ×•×”×©×™××™× (PRs) ××”××›×©×™×¨ ×”×–×” ×‘×œ×‘×“.  
              (×‘×¢×ª×™×“ ×›×©× ×—×‘×¨ ×œ×¢× ×Ÿ â€“ × ×•×›×œ ×œ×¢×©×•×ª ××™×¤×•×¡ ×¢× ×Ÿ × ×¤×¨×“.)
            </p>
          </div>
        </section>
      </section>
    </main>
  </div>

<script>
  // ===== DATA MODEL =====
  const program = {
    sunday: {
      title: "×™×•× ×¨××©×•×Ÿ â€“ ×—×–×” + ×›×ª×¤×™×™× + ×™×“ ××—×•×¨×™×ª",
      subtitle: "×—×–×” ×›×‘×“ + ×›×ª×£ ×§×“××™×ª/×××¦×¢×™×ª + ×˜×¨×™×™×¡×¤×¡",
      exercises: [
        {
          name: "×œ×—×™×¦×ª ×—×–×” ×‘××•×˜ (×‘× ×¥')",
          muscle: "×—×–×”",
          sets: 4, reps: "6â€“8",
          description: "×ª×¨×’×™×œ ×‘×¡×™×¡ ×œ×—×–×” ×××¦×¢×™ ×•×ª×—×ª×•×Ÿ. ×œ×©×›×‘ ×™×¦×™×‘, ×©×›××•×ª ××›×•×•×¦×•×ª ×œ××—×•×¨, ×œ×”×•×¨×™×“ ××ª ×”××•×˜ ×‘×©×œ×™×˜×” ×¢×“ ×§×¨×•×‘ ×œ×—×–×” ×•×œ×“×—×•×£ ×—×–×§ ××¢×œ×”."
        },
        {
          name: "×œ×—×™×¦×ª ×—×–×” ×‘×©×™×¤×•×¢ ×¢×œ×™×•×Ÿ ×¢× ×“×××‘×œ×™×",
          muscle: "×—×–×” ×¢×œ×™×•×Ÿ",
          sets: 4, reps: "8â€“10",
          description: "×œ×—×™×¦×” ×‘×–×•×•×™×ª 30Â° ×¢× ×“×××‘×œ×™× ×›×“×™ ×œ×¢×‘×•×“ ×¢×œ ×”×—×–×” ×”×¢×œ×™×•×Ÿ. ×œ×©××•×¨ ×¢×œ ×©×œ×™×˜×” ××œ××” ×•×ª× ×•×¢×” ×‘×§×©×ª ×˜×‘×¢×™×ª."
        },
        {
          name: "×¤×¨×¤×¨ ×‘××›×•× ×” ×œ×—×–×”",
          muscle: "×—×–×” ×××¦×¢×™",
          sets: 3, reps: "12â€“15",
          description: "×‘×™×“×•×“ ×œ×—×–×”. ×œ×¡×’×•×¨ ××ª ×”×™×“×™×™× ×¢×“ ×©×”×Ÿ ×›××¢×˜ × ×•×’×¢×•×ª, ×œ×¢×¦×•×¨ ×©× ×™×™×” ×‘×›×™×•×•×¥ ×•×œ×©×—×¨×¨ ×‘××™×˜×™×•×ª."
        },
        {
          name: "×§×¨×•×¡ ××•×‘×¨ ××œ××¢×œ×” ×œ××˜×” (×¤×•×œ×™ ×¢×œ×™×•×Ÿ)",
          muscle: "×—×–×” ×ª×—×ª×•×Ÿ",
          sets: 3, reps: "12â€“15",
          description: "×œ××©×•×š ××ª ×”×›×‘×œ×™× ×‘××œ×›×¡×•×Ÿ ××œ××¢×œ×” ×œ××˜×”, ××¨×¤×§×™× ××¢×˜ ×›×¤×•×¤×™×, ×œ×¡×™×™× ×‘×¢×¨×š ×‘×’×•×‘×” ×‘×˜×Ÿ ×¢×œ×™×•× ×”."
        },
        {
          name: "×œ×—×™×¦×ª ×›×ª×¤×™×™× ×‘××›×•× ×”",
          muscle: "×›×ª×£ ×§×“××™×ª",
          sets: 3, reps: "8â€“10",
          description: "×œ×—×™×¦×ª ×›×ª×¤×™×™× ×‘×™×©×™×‘×”. ×”×™×“×™×™× ××ª×—×™×œ×•×ª ×‘×¢×¨×š ×‘×’×•×‘×” ×›×ª×£, ×œ×“×—×•×£ ×œ××¢×œ×” ×‘×œ×™ ×œ× ×¢×•×œ ××¨×¤×§×™×."
        },
        {
          name: "×”×¨×—×§×ª ×›×ª×¤×™×™× ×œ×¦×“×“×™× ×¢× ×“×××‘×œ×™×",
          muscle: "×›×ª×£ ×××¦×¢×™×ª",
          sets: 3, reps: "12â€“15",
          description: "×œ×”×¨×™× ××ª ×”×“×××‘×œ×™× ×œ×¦×“×“×™× ×¢×“ ×’×•×‘×” ×”×›×ª×£ ×‘×œ×‘×“, ××¨×¤×§×™× ××¢×˜ ×›×¤×•×¤×™×, ×©×œ×™×˜×” ×•×œ× ×ª× ×•×¤×”."
        },
        {
          name: "×¤×©×™×˜×ª ××¨×¤×§×™× ××¢×œ ×”×¨××© ×¢× ×“×××‘×œ",
          muscle: "×™×“ ××—×•×¨×™×ª â€“ ×¨××© ××¨×•×š",
          sets: 3, reps: "10â€“12",
          description: "×™×©×™×‘×” ××• ×¢××™×“×”, ×“×××‘×œ ××—×“ ×‘×©×ª×™ ×™×“×™×™× ××¢×œ ×”×¨××©. ×œ×¨×“×ª ×¢××•×§ ×××—×•×¨×™ ×”×¨××© ×•×œ×™×™×©×¨ ×‘×©×§×˜."
        },
        {
          name: "×¤×©×™×˜×ª ××¨×¤×§×™× ×‘×—×‘×œ ×‘×¤×•×œ×™ ×¢×œ×™×•×Ÿ",
          muscle: "×™×“ ××—×•×¨×™×ª â€“ ×¨××© ×¦×“×“×™",
          sets: 3, reps: "12â€“15",
          description: "×œ×¢××•×“ ×¦××•×“ ×œ×¤×•×œ×™, ××¨×¤×§×™× ×œ×™×“ ×”×’×•×£, ×œ×“×—×•×£ ××ª ×”×—×‘×œ ×œ××˜×” ×•×œ×¤×ª×•×— ××•×ª×• ×‘×¡×•×£ ×”×˜×•×•×—."
        }
      ]
    },
    monday: {
      title: "×™×•× ×©× ×™ â€“ ×’×‘ + ×™×“ ×§×“××™×ª + ×××•×ª",
      subtitle: "×’×‘ ××œ× â€“ ×¨×•×—×‘, ×¢×•×‘×™, ×¢×œ×™×•×Ÿ ×•×ª×—×ª×•×Ÿ + ×‘×™×™×¡×¤×¡",
      exercises: [
        {
          name: "××ª×— ×‘××—×™×–×” ×¨×—×‘×”",
          muscle: "×’×‘ ×¨×—×‘",
          sets: 4, reps: "6â€“8 / 8â€“10",
          description: "×œ×ª×¤×•×¡ ×¨×—×‘ ××¢×˜ ××›×ª×£, ×œ××©×•×š ××ª ×‘×™×ª ×”×—×–×” ×œ×›×™×•×•×Ÿ ×”××•×˜, ×œ×—×©×•×‘ ×¢×œ ××©×™×›×” ×¢× ×”××¨×¤×§×™× ×œ××˜×”."
        },
        {
          name: "×—×ª×™×¨×” ×œ××•×˜ T",
          muscle: "×’×‘ ×××¦×¢×™/×¢×•×‘×™",
          sets: 4, reps: "8â€“10",
          description: "×¤×œ×’ ×’×•×£ ×¢×œ×™×•×Ÿ × ×•×˜×” ×§×“×™××”, ×’×‘ × ×™×˜×¨×œ×™, ×œ××©×•×š ××ª ×”×™×“×™×•×ª ×œ×›×™×•×•×Ÿ ×”×‘×˜×Ÿ ×ª×•×š ×©××™×¨×” ×¢×œ ×’×‘ ×—×–×§."
        },
        {
          name: "×—×ª×™×¨×” ×‘×™×©×™×‘×” ×‘×¤×•×œ×™ ×ª×—×ª×•×Ÿ",
          muscle: "×’×‘ ×××¦×¢×™",
          sets: 3, reps: "10â€“12",
          description: "×œ×©×‘×ª ×–×§×•×£, ×œ××©×•×š ××ª ×”×™×“×™×•×ª ×œ×›×™×•×•×Ÿ ×”×‘×˜×Ÿ, ×œ×”×—×–×™×§ ×©× ×™×™×” ×‘×›×™×•×•×¥ ×•×œ×©×—×¨×¨ ×œ××˜ ×§×“×™××”."
        },
        {
          name: "×¤×¨×¤×¨ ×”×¤×•×š ×‘××›×•× ×”/×¤×•×œ×™",
          muscle: "×’×‘ ×¢×œ×™×•×Ÿ + ×›×ª×£ ××—×•×¨×™×ª",
          sets: 3, reps: "12â€“15",
          description: "×œ×¤×ª×•×— ××ª ×”×™×“×™×™× ×œ××—×•×¨ ×¢×“ ×’×•×‘×” ×›×ª×£, ×œ×©××•×¨ ×¢×œ ×—×–×” ×§×“×™××” ×•×¢×œ ×ª× ×•×¢×” ××‘×•×§×¨×ª."
        },
        {
          name: "×¤×©×™×˜×ª ×’×‘ ×‘×›×™×¡× ×¨×•××™",
          muscle: "×’×‘ ×ª×—×ª×•×Ÿ",
          sets: 3, reps: "12â€“15",
          description: "×œ×›×•×¤×£ ××ª ×”×’×•×£ ×œ××˜×” ×‘××™×˜×™×•×ª ×•×œ×¢×œ×•×ª ×¢×“ ×§×• ×™×©×¨ ×¢× ×”×’×•×£, ×œ× ××¢×‘×¨ ×•×œ× ×œ× ×¢×•×œ ×’×‘."
        },
        {
          name: "×›×¤×™×¤×•×ª ××¨×¤×§×™× ×‘×¢××™×“×”",
          muscle: "×™×“ ×§×“××™×ª",
          sets: 3, reps: "10â€“12",
          description: "×œ×¢××•×“ ×™×¦×™×‘, ××¨×¤×§×™× ×¦××•×“×™× ×œ×’×•×£, ×œ×”×¢×œ×•×ª ×•×œ×¨×“×ª ×‘××™×˜×™×•×ª ×‘×œ×™ × ×¤× ×•×£."
        },
        {
          name: "×›×¤×™×¤×•×ª ×¤×˜×™×©×™× ×¢× ×“×××‘×œ×™×",
          muscle: "×™×“ ×§×“××™×ª (×‘×¨×›×™××œ×™×¡)",
          sets: 3, reps: "12",
          description: "××—×™×–×” × ×™×˜×¨×œ×™×ª (×›××™×œ×• ××—×–×™×§ ×¤×˜×™×©), ××¢×œ×” ×¢×“ ×–×•×•×™×ª 90â€“120Â° ×•×©×•×œ×˜ ×‘×™×¨×™×“×”."
        },
        {
          name: "×›×¤×™×¤×ª ×©×•×¨×© ×›×£ ×”×™×“ ×”×¤×•×›×”",
          muscle: "×××•×ª",
          sets: 3, reps: "12â€“15",
          description: "×œ×©×‘×ª, ×××•×ª ××•× ×—×•×ª, ×’×‘ ×›×£ ×”×™×“ ×œ××¢×œ×”, ×œ×”×¨×™× ××ª ×”××©×§×œ ×‘×¢×–×¨×ª ×©×•×¨×© ×›×£ ×”×™×“ ×‘×œ×‘×“."
        }
      ]
    },
    tuesday: {
      title: "×™×•× ×©×œ×™×©×™ â€“ ×¨×’×œ×™×™× + ×œ×™×‘×”",
      subtitle: "×¨×’×œ×™×™× ××œ××•×ª â€“ ×§×•×•××“×¨×™×¡×¤×¡, ××—×•×¨×™ ×”×™×¨×š, ×™×©×‘×Ÿ ×•×ª××•××™×",
      exercises: [
        {
          name: "×”××§×˜ ×¡×§×•×•××˜ ×‘××›×•× ×”",
          muscle: "×§×•×•××“ + ×™×©×‘×Ÿ",
          sets: 4, reps: "8â€“10",
          description: "×œ×¢××•×“ × ×›×•×Ÿ ×¢×œ ×”×¤×œ×˜×”, ×œ×¨×“×ª ×¢××•×§ ×ª×•×š ×©××™×¨×” ×¢×œ ×’×‘ ×¦××•×“ ×œ××©×¢× ×ª, ×œ× ×œ×™×™×©×¨ ×‘×¨×›×™×™× ×¢×“ ×”×¡×•×£."
        },
        {
          name: "×œ×—×™×¦×ª ×¨×’×œ×™×™× ×‘××›×•× ×”",
          muscle: "×›×œ ×”×¨×’×œ",
          sets: 4, reps: "10â€“12",
          description: "×¨×’×œ×™×™× ×‘×¨×•×—×‘ ×›×ª×¤×™×™×, ×œ×¤×ª×•×— ××¢×˜ ×”×—×•×¦×”, ×œ×¨×“×ª ×¢××•×§ ×•×œ×“×—×•×£ ×‘×©×œ×™×˜×”."
        },
        {
          name: "×¤×©×™×˜×ª ×‘×¨×›×™×™× ×‘××›×•× ×”",
          muscle: "×§×•×•××“×¨×™×¡×¤×¡",
          sets: 3, reps: "12â€“15",
          description: "×œ×™×™×©×¨ ××ª ×”×¨×’×œ×™×™× ×¢×“ ×›××¢×˜ × ×¢×™×œ×”, ×œ×¢×¦×•×¨ ×©× ×™×™×” ×‘×›×™×•×•×¥ ×•×œ×©×—×¨×¨ ×‘××™×˜×™×•×ª."
        },
        {
          name: "×›×¤×™×¤×ª ×‘×¨×›×™×™× ×‘×¢××™×“×”/××›×•× ×”",
          muscle: "××—×•×¨×™ ×”×™×¨×š",
          sets: 3, reps: "12â€“15",
          description: "×œ×›×•×¤×£ ××ª ×”×‘×¨×š ×›× ×’×“ ×”×ª× ×’×“×•×ª, ×œ×”×¨×’×™×© ××ª ××—×•×¨×™ ×”×™×¨×š, ×œ×©×—×¨×¨ ×œ××˜."
        },
        {
          name: "×“×“×œ×™×¤×˜ ×¨×•×× ×™ (RDL)",
          muscle: "×™×©×‘×Ÿ + ××¡×˜×¨×™× ×’",
          sets: 3, reps: "8â€“10",
          description: "×’×‘ ×™×©×¨, ×‘×¨×›×™×™× ×—×¦×™ ×›×¤×•×¤×•×ª, ×œ×”×•×¨×™×“ ××ª ×”××©×§×œ ×œ××•×¨×š ×”×¨×’×œ×™×™× ×¢×“ ××ª×™×—×” ×—×–×§×” ×‘××—×•×¨×™ ×”×™×¨×š."
        },
        {
          name: "×”×¨××ª ×¢×§×‘×™× ×‘×œ×—×™×¦×ª ×¨×’×œ×™×™×",
          muscle: "×ª××•××™× ×¢×œ×™×•×Ÿ",
          sets: 3, reps: "12â€“20",
          description: "×‘×™×©×™×‘×” ×‘××›×•× ×” ××• ×¢×œ ×”×¤×œ×˜×”, ×œ×”×•×¨×™×“ ××ª ×”×¢×§×‘×™× ×¢××•×§ ×•×œ×¢×œ×•×ª ×›××” ×©×™×•×ª×¨ ×’×‘×•×”."
        },
        {
          name: "×”×¨××ª ×¢×§×‘×™× ×‘×™×©×™×‘×” ×‘××›×•× ×”",
          muscle: "×ª××•××™× ×ª×—×ª×•×Ÿ",
          sets: 3, reps: "12â€“20",
          description: "×™×©×™×‘×”, ××©×§×œ ×¢×œ ×”×‘×¨×›×™×™×, ×¢×‘×•×“×” ××™×˜×™×ª ×•××‘×•×§×¨×ª ×‘×˜×•×•×— ××œ×."
        },
        {
          name: "×›×¤×™×¤×•×ª ×‘×˜×Ÿ ×‘××›×•× ×”",
          muscle: "×œ×™×‘×”",
          sets: 3, reps: "15",
          description: "×œ×›×•×•×¥ ××ª ×”×‘×˜×Ÿ ×•×œ× ×œ××©×•×š ×‘×™×“×™×™×, ×œ×”×•×¦×™× ××•×•×™×¨ ×‘×–××Ÿ ×”×›×™×•×•×¥."
        }
      ]
    },
    wednesday: {
      title: "×™×•× ×¨×‘×™×¢×™ â€“ ×—×–×” + ×›×ª×£ ×§×“××™×ª + ×›×ª×£ ×××¦×¢×™×ª + ×™×“ ××—×•×¨×™×ª",
      subtitle: "×©×™×œ×•×‘ × ×•×¡×£ ×œ×—×–×” + ×›×ª×¤×™×™× + ×˜×¨×™×™×¡×¤×¡",
      exercises: [
        {
          name: "×œ×—×™×¦×ª ×—×–×” ×‘×©×™×¤×•×¢ ×—×™×•×‘×™ ×¢× ×“×××‘×œ×™×",
          muscle: "×—×–×” ×¢×œ×™×•×Ÿ",
          sets: 4, reps: "8â€“10",
          description: "×›××• ×‘×™×•× ×¨××©×•×Ÿ â€“ ×“×’×© ×¢×œ ×—×–×” ×¢×œ×™×•×Ÿ, ×©×œ×™×˜×” ×‘×–×•×•×™×ª ×•×™×¦×™×‘×•×ª ×‘×›×ª×¤×™×™×."
        },
        {
          name: "×œ×—×™×¦×ª ×—×–×” ×‘×¢××™×“×” ×¢× ×›×‘×œ×™×",
          muscle: "×—×–×” ×××¦×¢×™/×ª×—×ª×•×Ÿ",
          sets: 3, reps: "10â€“12",
          description: "×œ×¢××•×“ ×‘×××¦×¢, ×œ××©×•×š ××ª ×”×™×“×™×•×ª ×§×“×™××” ×•×œ×¡×’×•×¨ ×‘×§×• ×—×–×”, ×©×œ×™×˜×” ××œ××” ×‘×›×œ ×”×˜×•×•×—."
        },
        {
          name: "×¤×¨×¤×¨ ×¢× ×›×‘×œ×™× ×‘×™×©×™×‘×”",
          muscle: "×—×–×” ×××¦×¢×™",
          sets: 3, reps: "12â€“15",
          description: "×‘×™×“×•×“ ×—×–×§, ×œ×©××•×¨ ×¢×œ ××¨×¤×§×™× ××¢×˜ ×›×¤×•×¤×™×, ×œ×¢×¦×•×¨ ×‘×©×™× ×”×›×™×•×•×¥."
        },
        {
          name: "×œ×—×™×¦×ª ×›×ª×¤×™×™× ×¢× ×“×××‘×œ×™×",
          muscle: "×›×ª×£ ×§×“××™×ª + ×××¦×¢×™×ª",
          sets: 3, reps: "8â€“10",
          description: "×™×©×™×‘×” ×–×§×•×¤×”, ×“×××‘×œ×™× ×‘×¦×“ ×”×¨××©, ×œ×“×—×•×£ ×œ××¢×œ×” ×‘×œ×™ × ×¢×™×œ×” ×—×“×”."
        },
        {
          name: "×”×¨×—×§×ª ×›×ª×¤×™×™× ×œ×¦×“×“×™×",
          muscle: "×›×ª×£ ×××¦×¢×™×ª",
          sets: 3, reps: "12â€“15",
          description: "×›××• ×‘×™×•× ×¨××©×•×Ÿ â€“ ×“×’×© ×¢×œ ×¨×•×—×‘ ×›×ª×£."
        },
        {
          name: "×¤×©×™×˜×ª ××¨×¤×§×™× ××¢×œ ×”×¨××© ×¢× ×“×××‘×œ",
          muscle: "×™×“ ××—×•×¨×™×ª â€“ ×¨××© ××¨×•×š",
          sets: 3, reps: "10â€“12",
          description: "×›××• ×‘×™×•× ×¨××©×•×Ÿ â€“ ×“×’×© ×¢×œ ×¨××© ××¨×•×š ×©×œ ×”×˜×¨×™×™×¡×¤×¡."
        },
        {
          name: "×¤×©×™×˜×ª ××¨×¤×§×™× ×‘×—×‘×œ ×‘×¤×•×œ×™ ×¢×œ×™×•×Ÿ",
          muscle: "×™×“ ××—×•×¨×™×ª â€“ ×¨××© ×¦×“×“×™",
          sets: 3, reps: "12â€“15",
          description: "×›××• ×‘×™×•× ×¨××©×•×Ÿ â€“ ×“×’×© ×¢×œ ×¨××© ×¦×“×“×™ ×•×”×©×œ××ª × ×¤×—."
        }
      ]
    },
    Thursday: {
      title: "×™×•× ×—××™×©×™ â€“ ×’×‘ + ×™×“ ×§×“××™×ª + ×××•×ª",
      subtitle: "×’×‘ ×©× ×™ ×‘×©×‘×•×¢ + ×‘×™×™×¡×¤×¡ ×•×××•×ª ××—×“×©",
      exercises: [
        {
          name: "××ª×— ×‘××—×™×–×” ×¨×—×‘×”",
          muscle: "×’×‘ ×¨×—×‘",
          sets: 4, reps: "6â€“8 / 8â€“10",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ××“×’×™×© ×¨×—×‘ ×”×’×‘."
        },
        {
          name: "×—×ª×™×¨×” ×œ××•×˜ T",
          muscle: "×’×‘ ×××¦×¢×™/×¢×•×‘×™",
          sets: 4, reps: "8â€“10",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ×¢×•×‘×™ ×”×’×‘."
        },
        {
          name: "×—×ª×™×¨×” ×‘×™×©×™×‘×” ×‘×¤×•×œ×™ ×ª×—×ª×•×Ÿ",
          muscle: "×’×‘ ×××¦×¢×™",
          sets: 3, reps: "10â€“12",
          description: "×—×–×¨×” ×¢×œ ×ª×‘× ×™×ª ×™×¦×™×‘×” ×œ×¢×•××¡ × ×•×¡×£."
        },
        {
          name: "×¤×¨×¤×¨ ×”×¤×•×š",
          muscle: "×’×‘ ×¢×œ×™×•×Ÿ + ×›×ª×£ ××—×•×¨×™×ª",
          sets: 3, reps: "12â€“15",
          description: "×“×’×© × ×•×¡×£ ×¢×œ ×™×¦×™×‘×” ×•×›×ª×£ ××—×•×¨×™×ª."
        },
        {
          name: "×¤×©×™×˜×ª ×’×‘ ×‘×›×™×¡× ×¨×•××™",
          muscle: "×’×‘ ×ª×—×ª×•×Ÿ",
          sets: 3, reps: "12â€“15",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ×—×™×–×•×§ ×–×•×§×¤×™ ×’×‘."
        },
        {
          name: "×›×¤×™×¤×•×ª ××¨×¤×§×™× ×‘×¢××™×“×”",
          muscle: "×™×“ ×§×“××™×ª",
          sets: 3, reps: "10â€“12",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ×”××©×š × ×¤×— ×œ×‘×™×™×¡×¤×¡."
        },
        {
          name: "×›×¤×™×¤×•×ª ×¤×˜×™×©×™× ×¢× ×“×××‘×œ×™×",
          muscle: "×™×“ ×§×“××™×ª",
          sets: 3, reps: "12",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ×“×’×© ×¢×œ ×‘×¨×›×™××œ×™×¡ ×•×××•×ª."
        },
        {
          name: "×›×¤×™×¤×ª ×©×•×¨×© ×›×£ ×”×™×“ ×”×¤×•×›×”",
          muscle: "×××•×ª",
          sets: 3, reps: "12â€“15",
          description: "×›××• ×‘×™×•× ×©× ×™ â€“ ××—×™×–×” ×—×–×§×”."
        }
      ]
    },
    friday: {
      title: "×™×•× ×©×™×©×™ â€“ ×¨×’×œ×™×™× + ×œ×™×‘×”",
      subtitle: "×¨×’×œ×™×™× ×©× ×™ â€“ ×“×’×© × ×•×¡×£ ×¢×œ ×™×©×‘×Ÿ, ××—×•×¨×™ ×”×™×¨×š ×•×ª××•××™×",
      exercises: [
        {
          name: "×”××§×˜ ×¡×§×•×•××˜ ×‘××›×•× ×”",
          muscle: "×§×•×•××“ + ×™×©×‘×Ÿ",
          sets: 4, reps: "8â€“10",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ ×“×’×© × ×•×¡×£."
        },
        {
          name: "×œ×—×™×¦×ª ×¨×’×œ×™×™× ×‘××›×•× ×”",
          muscle: "×›×œ ×”×¨×’×œ",
          sets: 4, reps: "10â€“12",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ × ×¤×— × ×•×¡×£."
        },
        {
          name: "×¤×©×™×˜×ª ×‘×¨×›×™×™× ×‘××›×•× ×”",
          muscle: "×§×•×•××“×¨×™×¡×¤×¡",
          sets: 3, reps: "12â€“15",
          description: "×‘×™×“×•×“ × ×•×¡×£ ×œ×§×•×•××“."
        },
        {
          name: "×›×¤×™×¤×ª ×‘×¨×›×™×™× ×‘×¢××™×“×”/××›×•× ×”",
          muscle: "××—×•×¨×™ ×”×™×¨×š",
          sets: 3, reps: "12â€“15",
          description: "×¢×•×“ × ×¤×— ×œ××¡×˜×¨×™× ×’."
        },
        {
          name: "×“×“×œ×™×¤×˜ ×¨×•×× ×™ (RDL)",
          muscle: "×™×©×‘×Ÿ + ××¡×˜×¨×™× ×’",
          sets: 3, reps: "8â€“10",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ ×ª×¨×’×™×œ ×—×•×‘×”."
        },
        {
          name: "×”×¨××ª ×¢×§×‘×™× ×‘×œ×—×™×¦×ª ×¨×’×œ×™×™×",
          muscle: "×ª××•××™× ×¢×œ×™×•×Ÿ",
          sets: 3, reps: "12â€“20",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ × ×¤×— × ×•×¡×£."
        },
        {
          name: "×”×¨××ª ×¢×§×‘×™× ×‘×™×©×™×‘×” ×‘××›×•× ×”",
          muscle: "×ª××•××™× ×ª×—×ª×•×Ÿ",
          sets: 3, reps: "12â€“20",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ ×”××©×š ×¢×‘×•×“×”."
        },
        {
          name: "×›×¤×™×¤×•×ª ×‘×˜×Ÿ ×‘××›×•× ×”",
          muscle: "×œ×™×‘×”",
          sets: 3, reps: "15",
          description: "×›××• ×‘×™×•× ×©×œ×™×©×™ â€“ ×—×™×–×•×§ ×‘×˜×Ÿ."
        }
      ]
    }
  };

  const dayOrder = [
    { key: "sunday", label: "×¨××©×•×Ÿ" },
    { key: "monday", label: "×©× ×™" },
    { key: "tuesday", label: "×©×œ×™×©×™" },
    { key: "wednesday", label: "×¨×‘×™×¢×™" },
    { key: "Thursday", label: "×—××™×©×™" },
    { key: "friday", label: "×©×™×©×™" }
  ];

  // ===== DOM REFS =====
  const pages = {
    dashboard: document.getElementById("dashboard"),
    workout: document.getElementById("workout"),
    library: document.getElementById("library"),
    history: document.getElementById("history"),
    prs: document.getElementById("prs"),
    settings: document.getElementById("settings")
  };
  const mainPageTitle = document.getElementById("mainPageTitle");
  const mainPageSubtitle = document.getElementById("mainPageSubtitle");

  const navItems = document.querySelectorAll(".nav-item");

  const dayButtonsContainer = document.getElementById("dayButtons");
  const dayTitleEl = document.getElementById("dayTitle");
  const daySubtitleEl = document.getElementById("daySubtitle");
  const exerciseTableBody = document.getElementById("exerciseTableBody");
  const dateInput = document.getElementById("workoutDate");
  const resetDayBtn = document.getElementById("resetDayBtn");
  const goWorkoutModeBtn = document.getElementById("goWorkoutModeBtn");
  const dayHistoryList = document.getElementById("dayHistoryList");
  const exerciseSelect = document.getElementById("exerciseSelect");
  const exportCsvBtn = document.getElementById("exportCsvBtn");
  const historyContainer = document.getElementById("historyContainer");
  const prGrid = document.getElementById("prGrid");

  // workout mode
  const workoutDaySelect = document.getElementById("workoutDaySelect");
  const workoutModeDate = document.getElementById("workoutModeDate");
  const workoutExName = document.getElementById("workoutExName");
  const workoutExMuscle = document.getElementById("workoutExMuscle");
  const workoutSetsRepsTag = document.getElementById("workoutSetsRepsTag");
  const workoutIndexTag = document.getElementById("workoutIndexTag");
  const currentSetLabel = document.getElementById("currentSetLabel");
  const finishSetBtn = document.getElementById("finishSetBtn");
  const nextExerciseBtn = document.getElementById("nextExerciseBtn");
  const workoutWeightInput = document.getElementById("workoutWeightInput");
  const saveWorkoutWeightBtn = document.getElementById("saveWorkoutWeightBtn");
  const restSelect = document.getElementById("restSelect");
  const startRestBtn = document.getElementById("startRestBtn");
  const restTimerDisplay = document.getElementById("restTimerDisplay");
  const workoutExerciseList = document.getElementById("workoutExerciseList");

  // settings
  const defaultRestSelect = document.getElementById("defaultRestSelect");
  const resetAllDataBtn = document.getElementById("resetAllDataBtn");

  const exerciseLibraryGrid = document.getElementById("exerciseLibraryGrid");

  let currentDayKey = "sunday";
  let chart;
  let currentChartExerciseIndex = 0;
  let restTimerId = null;
  let restRemaining = 0;
  let workoutCurrentExerciseIndex = 0;
  let workoutCurrentSet = 1;

  // ===== HELPERS: STORAGE KEYS =====
  function storageKey(dayKey, index, field) {
    return `training_${dayKey}_ex${index}_${field}`;
  }

  function dateStorageKey(dayKey) {
    return `training_${dayKey}_date`;
  }

  function historyKey(dayKey, index) {
    return `training_history_${dayKey}_ex${index}`;
  }

  function defaultRestKey() {
    return `training_default_rest`;
  }

  function loadHistory(dayKey, index) {
    try {
      const raw = localStorage.getItem(historyKey(dayKey, index));
      if (!raw) return [];
      const arr = JSON.parse(raw);
      if (!Array.isArray(arr)) return [];
      return arr;
    } catch {
      return [];
    }
  }

  function saveHistory(dayKey, index, history) {
    localStorage.setItem(historyKey(dayKey, index), JSON.stringify(history));
  }

  function addHistoryEntry(dayKey, index, dateStr, weightStr) {
    if (!dateStr || !weightStr) return;
    const weight = parseFloat(weightStr);
    if (isNaN(weight) || weight <= 0) return;
    const history = loadHistory(dayKey, index);
    const last = history[history.length - 1];
    if (last && last.date === dateStr && parseFloat(last.weight) === weight) return;
    const now = new Date();
    history.push({ date: dateStr, weight, ts: now.toISOString() });
    if (history.length > 60) history.shift();
    saveHistory(dayKey, index, history);
  }

  // ===== RENDER DAY (DASHBOARD) =====
  function renderDay(dayKey) {
    currentDayKey = dayKey;
    const dayData = program[dayKey];
    if (!dayData) return;

    dayTitleEl.textContent = dayData.title;
    daySubtitleEl.textContent = dayData.subtitle || "";

    Array.from(dayButtonsContainer.children).forEach(btn => {
      btn.classList.toggle("active", btn.dataset.dayKey === dayKey);
    });

    const savedDate = localStorage.getItem(dateStorageKey(dayKey));
    dateInput.value = savedDate || "";

    exerciseTableBody.innerHTML = "";

    dayData.exercises.forEach((ex, index) => {
      const tr = document.createElement("tr");

      const tdName = document.createElement("td");
      tdName.className = "name-col";
      tdName.textContent = ex.name;
      tr.appendChild(tdName);

      const tdSetsReps = document.createElement("td");
      tdSetsReps.textContent = `${ex.sets} Ã— ${ex.reps}`;
      tr.appendChild(tdSetsReps);

      const tdMuscle = document.createElement("td");
      tdMuscle.className = "muscle-col";
      const badge = document.createElement("span");
      badge.className = "badge-muscle";
      const dot = document.createElement("span");
      dot.className = "dot";
      const text = document.createTextNode(ex.muscle);
      badge.appendChild(dot);
      badge.appendChild(text);
      tdMuscle.appendChild(badge);
      tr.appendChild(tdMuscle);

      const tdSetsDone = document.createElement("td");
      const setsWrapper = document.createElement("div");
      setsWrapper.className = "sets-dots";
      const storedSets = parseInt(localStorage.getItem(storageKey(dayKey, index, "setsDone")) || "0", 10);
      for (let s = 1; s <= ex.sets; s++) {
        const dotEl = document.createElement("button");
        dotEl.type = "button";
        dotEl.className = "set-dot" + (s <= storedSets ? " active" : "");
        dotEl.addEventListener("click", () => {
          const current = parseInt(localStorage.getItem(storageKey(dayKey, index, "setsDone")) || "0", 10);
          let newVal = s;
          if (current === s) {
            newVal = s - 1;
          }
          localStorage.setItem(storageKey(dayKey, index, "setsDone"), newVal.toString());
          renderDay(dayKey);
        });
        setsWrapper.appendChild(dotEl);
      }
      tdSetsDone.appendChild(setsWrapper);
      tr.appendChild(tdSetsDone);

      const tdWeight = document.createElement("td");
      const weightInput = document.createElement("input");
      weightInput.type = "number";
      weightInput.step = "0.5";
      weightInput.placeholder = "××©×§×œ";
      weightInput.value = localStorage.getItem(storageKey(dayKey, index, "weight")) || "";
      weightInput.addEventListener("input", () => {
        localStorage.setItem(storageKey(dayKey, index, "weight"), weightInput.value);
        if (dateInput.value) {
          addHistoryEntry(dayKey, index, dateInput.value, weightInput.value);
          renderDayHistory(dayKey);
          updateChart();
          renderPRs();
          renderHistoryPage();
        }
      });
      tdWeight.appendChild(weightInput);
      tr.appendChild(tdWeight);

      const tdNotes = document.createElement("td");
      const notesInput = document.createElement("input");
      notesInput.type = "text";
      notesInput.placeholder = "×”×¢×¨×” (×¡×˜×™×, ×§×•×©×™, RIR...)";
      notesInput.value = localStorage.getItem(storageKey(dayKey, index, "notes")) || "";
      notesInput.addEventListener("input", () => {
        localStorage.setItem(storageKey(dayKey, index, "notes"), notesInput.value);
      });
      tdNotes.appendChild(notesInput);
      tr.appendChild(tdNotes);

      exerciseTableBody.appendChild(tr);
    });

    populateExerciseSelect();
    renderDayHistory(dayKey);
    updateChart();
    populateWorkoutDaySelect();
    populateWorkoutExerciseList();
    renderPRs();
    renderHistoryPage();
  }

  function renderDayHistory(dayKey) {
    dayHistoryList.innerHTML = "";
    const dayData = program[dayKey];
    if (!dayData) return;
    const items = [];
    dayData.exercises.forEach((ex, index) => {
      const history = loadHistory(dayKey, index);
      history.forEach(h => {
        items.push({
          exName: ex.name,
          date: h.date,
          weight: h.weight,
          ts: h.ts || h.date
        });
      });
    });
    items.sort((a, b) => (a.ts || "").localeCompare(b.ts || ""));
    const lastTen = items.slice(-10);
    lastTen.reverse();
    lastTen.forEach(item => {
      const li = document.createElement("li");
      li.className = "history-item";
      const labelSpan = document.createElement("span");
      labelSpan.className = "label";
      labelSpan.textContent = `${item.exName}`;
      const metaSpan = document.createElement("span");
      metaSpan.className = "meta";
      metaSpan.textContent = `${item.date} â€¢ ${item.weight} ×§×´×’`;
      li.appendChild(labelSpan);
      li.appendChild(metaSpan);
      dayHistoryList.appendChild(li);
    });
    if (lastTen.length === 0) {
      const li = document.createElement("li");
      li.className = "history-item";
      li.innerHTML = `<span class="label">××™×Ÿ ×”×™×¡×˜×•×¨×™×” ×œ×™×•× ×”×–×” ×¢×“×™×™×Ÿ</span><span class="meta">×ª×ª×—×™×œ ×œ×”×–×™×Ÿ ××©×§×œ×™×</span>`;
      dayHistoryList.appendChild(li);
    }
  }

  function populateExerciseSelect() {
    const dayData = program[currentDayKey];
    exerciseSelect.innerHTML = "";
    dayData.exercises.forEach((ex, index) => {
      const opt = document.createElement("option");
      opt.value = index;
      opt.textContent = ex.name;
      exerciseSelect.appendChild(opt);
    });
    currentChartExerciseIndex = 0;
    exerciseSelect.value = "0";
  }

  function updateChart() {
    const dayData = program[currentDayKey];
    if (!dayData) return;
    const ex = dayData.exercises[currentChartExerciseIndex];
    const history = loadHistory(currentDayKey, currentChartExerciseIndex);

    const labels = history.map((h, i) => h.date || `××™××•×Ÿ ${i + 1}`);
    const values = history.map(h => h.weight);

    const ctx = document.getElementById("progressChart").getContext("2d");

    if (chart) {
      chart.destroy();
    }

    chart = new Chart(ctx, {
      type: "line",
      data: {
        labels,
        datasets: [{
          label: ex.name,
          data: values,
          tension: 0.3,
          fill: true,
          borderColor: "#f97316",
          backgroundColor: "rgba(249,115,22,0.22)",
          pointRadius: 3,
          pointBackgroundColor: "#fed7aa"
        }]
      },
      options: {
        plugins: {
          legend: {
            labels: {
              font: { size: 11 },
              color: "#e5e7eb"
            }
          }
        },
        scales: {
          x: {
            ticks: { color: "#9ca3af", font: { size: 10 } },
            grid: { color: "rgba(55,65,81,0.4)" }
          },
          y: {
            ticks: { color: "#9ca3af", font: { size: 10 } },
            grid: { color: "rgba(55,65,81,0.4)" }
          }
        }
      }
    });
  }

  // ===== WORKOUT MODE =====
  function populateWorkoutDaySelect() {
    workoutDaySelect.innerHTML = "";
    dayOrder.forEach(d => {
      const opt = document.createElement("option");
      opt.value = d.key;
      opt.textContent = d.label;
      workoutDaySelect.appendChild(opt);
    });
    workoutDaySelect.value = currentDayKey;
  }

  function populateWorkoutExerciseList() {
    const dayKey = workoutDaySelect.value || currentDayKey;
    const dayData = program[dayKey];
    workoutExerciseList.innerHTML = "";
    if (!dayData) return;
    dayData.exercises.forEach((ex, index) => {
      const li = document.createElement("li");
      li.className = "workout-list-item" + (index === workoutCurrentExerciseIndex ? " active" : "");
      const left = document.createElement("span");
      left.textContent = ex.name;
      const right = document.createElement("span");
      right.textContent = `${ex.sets} Ã— ${ex.reps}`;
      li.appendChild(left);
      li.appendChild(right);
      li.addEventListener("click", () => {
        workoutCurrentExerciseIndex = index;
        workoutCurrentSet = 1;
        renderWorkoutCurrent();
      });
      workoutExerciseList.appendChild(li);
    });
  }

  function renderWorkoutCurrent() {
    const dayKey = workoutDaySelect.value || currentDayKey;
    const dayData = program[dayKey];
    if (!dayData) return;
    const ex = dayData.exercises[workoutCurrentExerciseIndex];
    if (!ex) return;

    workoutExName.textContent = ex.name;
    workoutExMuscle.textContent = ex.muscle;
    workoutSetsRepsTag.textContent = `${ex.sets} Ã— ${ex.reps}`;
    workoutIndexTag.textContent = `×ª×¨×’×™×œ ${workoutCurrentExerciseIndex + 1} ××ª×•×š ${dayData.exercises.length}`;
    currentSetLabel.textContent = workoutCurrentSet.toString();

    const storedWeight = localStorage.getItem(storageKey(dayKey, workoutCurrentExerciseIndex, "weight"));
    workoutWeightInput.value = storedWeight || "";

    Array.from(workoutExerciseList.children).forEach((li, idx) => {
      li.classList.toggle("active", idx === workoutCurrentExerciseIndex);
    });

    const savedDate = localStorage.getItem(dateStorageKey(dayKey));
    if (savedDate) {
      workoutModeDate.value = savedDate;
    }
  }

  function startRestTimer(seconds) {
    if (restTimerId) {
      clearInterval(restTimerId);
      restTimerId = null;
    }
    restRemaining = seconds;
    updateRestDisplay();
    restTimerId = setInterval(() => {
      restRemaining--;
      if (restRemaining <= 0) {
        clearInterval(restTimerId);
        restTimerId = null;
        restRemaining = 0;
      }
      updateRestDisplay();
    }, 1000);
  }

  function updateRestDisplay() {
    const m = Math.floor(restRemaining / 60);
    const s = restRemaining % 60;
    const mm = m.toString().padStart(2, "0");
    const ss = s.toString().padStart(2, "0");
    restTimerDisplay.textContent = `${mm}:${ss}`;
  }

  // ===== EXERCISE LIBRARY =====
  function renderExerciseLibrary() {
    exerciseLibraryGrid.innerHTML = "";
    dayOrder.forEach(d => {
      const dayData = program[d.key];
      if (!dayData) return;
      dayData.exercises.forEach(ex => {
        const card = document.createElement("div");
        card.className = "exercise-card";
        const h4 = document.createElement("h4");
        h4.textContent = ex.name;
        const muscle = document.createElement("div");
        muscle.className = "muscle";
        muscle.textContent = ex.muscle;
        const p = document.createElement("p");
        p.textContent = ex.description || "";
        card.appendChild(h4);
        card.appendChild(muscle);
        card.appendChild(p);
        exerciseLibraryGrid.appendChild(card);
      });
    });
  }

  // ===== HISTORY PAGE =====
  function renderHistoryPage() {
    historyContainer.innerHTML = "";
    const allEntries = [];
    dayOrder.forEach(d => {
      const dayKey = d.key;
      const dayData = program[dayKey];
      if (!dayData) return;
      dayData.exercises.forEach((ex, index) => {
        const history = loadHistory(dayKey, index);
        history.forEach(h => {
          allEntries.push({
            dayKey,
            dayLabel: d.label,
            exName: ex.name,
            date: h.date,
            weight: h.weight,
            ts: h.ts || (h.date + "T00:00:00")
          });
        });
      });
    });
    if (allEntries.length === 0) {
      const p = document.createElement("p");
      p.className = "small-note";
      p.textContent = "××™×Ÿ ×¢×“×™×™×Ÿ ×”×™×¡×˜×•×¨×™×™×ª ××™××•× ×™×. ××œ× ××©×§×œ×™× ×‘×“×©×‘×•×¨×“ ×•×ª×ª×—×™×œ ×œ×‘× ×•×ª ×™×•××Ÿ.";
      historyContainer.appendChild(p);
      return;
    }

    allEntries.sort((a, b) => (a.ts || "").localeCompare(b.ts || ""));
    const groups = {};
    allEntries.forEach(e => {
      const key = `${e.date}__${e.dayLabel}`;
      if (!groups[key]) groups[key] = [];
      groups[key].push(e);
    });

    Object.keys(groups).forEach(groupKey => {
      const [date, dayLabel] = groupKey.split("__");
      const div = document.createElement("div");
      div.className = "history-group";
      const title = document.createElement("div");
      title.className = "history-group-title";
      title.textContent = `${date} â€“ ×™×•× ${dayLabel}`;
      div.appendChild(title);
      const ul = document.createElement("ul");
      ul.className = "history-group-list";
      groups[groupKey].forEach(e => {
        const li = document.createElement("li");
        li.innerHTML = `<span>${e.exName}</span><span>${e.weight} ×§×´×’</span>`;
        ul.appendChild(li);
      });
      div.appendChild(ul);
      historyContainer.appendChild(div);
    });
  }

  // ===== PR PAGE =====
  function renderPRs() {
    prGrid.innerHTML = "";
    dayOrder.forEach(d => {
      const dayKey = d.key;
      const dayData = program[dayKey];
      if (!dayData) return;
      dayData.exercises.forEach((ex, index) => {
        const history = loadHistory(dayKey, index);
        if (!history.length) return;
        let maxEntry = history[0];
        history.forEach(h => {
          if (parseFloat(h.weight) > parseFloat(maxEntry.weight)) {
            maxEntry = h;
          }
        });
        const card = document.createElement("div");
        card.className = "pr-card";
        const h4 = document.createElement("h4");
        h4.textContent = ex.name;
        const val = document.createElement("div");
        val.className = "pr-value";
        val.textContent = `${maxEntry.weight} ×§×´×’`;
        const meta = document.createElement("div");
        meta.className = "pr-meta";
        meta.textContent = `×©×™× ×‘×™×•× ${maxEntry.date} â€¢ ×™×•× ${d.label}`;
        card.appendChild(h4);
        card.appendChild(val);
        card.appendChild(meta);
        prGrid.appendChild(card);
      });
    });
    if (!prGrid.children.length) {
      const p = document.createElement("p");
      p.className = "small-note";
      p.textContent = "××™×Ÿ ×¢×“×™×™×Ÿ ×©×™××™×, ×¦×¨×™×š ×œ×”×–×™×Ÿ ××¡×¤×¨ ××™××•× ×™× ×¢× ××©×§×œ×™× ×›×“×™ ×œ×—×©×‘ PR.";
      prGrid.appendChild(p);
    }
  }

  // ===== EXPORT CSV =====
  function exportHistoryToCsv() {
    const rows = [["day_key", "day_label", "date", "exercise", "weight", "timestamp"]];
    dayOrder.forEach(d => {
      const dayKey = d.key;
      const dayData = program[dayKey];
      if (!dayData) return;
      dayData.exercises.forEach((ex, index) => {
        const history = loadHistory(dayKey, index);
        history.forEach(h => {
          rows.push([
            dayKey,
            d.label,
            h.date,
            ex.name,
            h.weight,
            h.ts || ""
          ]);
        });
      });
    });
    if (rows.length === 1) {
      alert("××™×Ÿ × ×ª×•× ×™ ×”×™×¡×˜×•×¨×™×” ×œ×™×™×¦×.");
      return;
    }
    let csv = "";
    rows.forEach(r => {
      csv += r.map(v => `"${String(v).replace(/"/g, '""')}"`).join(",") + "\n";
    });
    const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "training-history.csv";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  // ===== SETTINGS =====
  function loadDefaultRest() {
    const val = localStorage.getItem(defaultRestKey());
    const useVal = val || "90";
    defaultRestSelect.value = useVal;
    restSelect.value = useVal;
  }

  function saveDefaultRest() {
    const val = defaultRestSelect.value || "90";
    localStorage.setItem(defaultRestKey(), val);
    restSelect.value = val;
  }

  function resetAllData() {
    if (!confirm("×œ××—×•×§ ××ª ×›×œ ×”× ×ª×•× ×™× (××©×§×œ×™×, ×”×¢×¨×•×ª, ×”×™×¡×˜×•×¨×™×”, ×©×™××™×) ××”××›×©×™×¨ ×”×–×”?")) return;
    Object.keys(localStorage)
      .filter(k => k.startsWith("training_"))
      .forEach(k => localStorage.removeItem(k));
    renderDay(currentDayKey);
    renderHistoryPage();
    renderPRs();
    alert("×›×œ ×”× ×ª×•× ×™× × ××—×§×• ××”××›×©×™×¨ ×”×–×”. ××¤×©×¨ ×œ×”×ª×—×™×œ ×××¤×¡.");
  }

  // ===== NAVIGATION =====
  function setActivePage(pageKey) {
    Object.keys(pages).forEach(key => {
      pages[key].classList.toggle("active", key === pageKey);
    });
    navItems.forEach(item => {
      item.classList.toggle("active", item.dataset.page === pageKey);
    });
    switch (pageKey) {
      case "dashboard":
        mainPageTitle.textContent = "×“×©×‘×•×¨×“ ××™××•× ×™× ×©×‘×•×¢×™";
        mainPageSubtitle.textContent = "××¢×§×‘ ××©×§×œ×™×, ×¡×˜×™× ×•×”×ª×§×“××•×ª ×œ××•×¨×š ×–××Ÿ.";
        break;
      case "workout":
        mainPageTitle.textContent = "××¦×‘ ××™××•×Ÿ â€“ ×‘×™×¦×•×¢ ×¡×˜×™× ×‘×–××Ÿ ×××ª";
        mainPageSubtitle.textContent = "×”×ª××§×“×•×ª ×‘×ª×¨×’×™×œ ××—×“, ×¡×˜×™×, ×˜×™×™××¨ ×× ×•×—×” ×•××¢×‘×¨ ××•×˜×•××˜×™.";
        break;
      case "library":
        mainPageTitle.textContent = "×¡×¤×¨×™×™×ª ×ª×¨×’×™×œ×™× ××œ××”";
        mainPageSubtitle.textContent = "×”×‘× ×” ××” ×¢×•×©×” ×›×œ ×ª×¨×’×™×œ ×•××™×š ×œ×‘×¦×¢ × ×›×•×Ÿ.";
        renderExerciseLibrary();
        break;
      case "history":
        mainPageTitle.textContent = "×™×•××Ÿ ××™××•× ×™×";
        mainPageSubtitle.textContent = "×›×œ ×”××™××•× ×™×, ×›×œ ×”×ª××¨×™×›×™×, ×”×›×œ ×‘××§×•× ××—×“.";
        renderHistoryPage();
        break;
      case "prs":
        mainPageTitle.textContent = "×©×™××™× ××™×©×™×™× (PRs)";
        mainPageSubtitle.textContent = "××©×§×œ×™× ×”×›×™ ×—×–×§×™× ×©×”×¨××ª ×‘×›×œ ×ª×¨×’×™×œ.";
        renderPRs();
        break;
      case "settings":
        mainPageTitle.textContent = "×”×’×“×¨×•×ª ××¤×œ×™×§×¦×™×”";
        mainPageSubtitle.textContent = "×©×œ×™×˜×” ×¢×œ ×× ×•×—×”, ××™×¤×•×¡×™× ×•×”×¢×“×¤×•×ª.";
        break;
    }
  }

  // ===== INIT =====
  // nav
  navItems.forEach(item => {
    item.addEventListener("click", () => {
      const pageKey = item.dataset.page;
      setActivePage(pageKey);
    });
  });

  // day buttons
  dayOrder.forEach(d => {
    const btn = document.createElement("button");
    btn.className = "day-button" + (d.key === currentDayKey ? " active" : "");
    btn.dataset.dayKey = d.key;
    const dot = document.createElement("span");
    dot.className = "dot";
    btn.appendChild(dot);
    btn.appendChild(document.createTextNode("×™×•× " + d.label));
    btn.addEventListener("click", () => {
      renderDay(d.key);
    });
    dayButtonsContainer.appendChild(btn);
  });

  dateInput.addEventListener("change", () => {
    localStorage.setItem(dateStorageKey(currentDayKey), dateInput.value);
  });

  resetDayBtn.addEventListener("click", () => {
    if (!confirm("×œ××¤×¡ ××ª ×›×œ ×”××©×§×œ×™×, ×”×”×¢×¨×•×ª, ×”×¡×˜×™× ×•×”×”×™×¡×˜×•×¨×™×” ×œ×™×•× ×”×–×”?")) return;
    const dayData = program[currentDayKey];
    dayData.exercises.forEach((_, index) => {
      localStorage.removeItem(storageKey(currentDayKey, index, "weight"));
      localStorage.removeItem(storageKey(currentDayKey, index, "notes"));
      localStorage.removeItem(storageKey(currentDayKey, index, "setsDone"));
      localStorage.removeItem(historyKey(currentDayKey, index));
    });
    localStorage.removeItem(dateStorageKey(currentDayKey));
    renderDay(currentDayKey);
  });

  goWorkoutModeBtn.addEventListener("click", () => {
    setActivePage("workout");
  });

  exerciseSelect.addEventListener("change", () => {
    currentChartExerciseIndex = parseInt(exerciseSelect.value, 10) || 0;
    updateChart();
  });

  exportCsvBtn.addEventListener("click", exportHistoryToCsv);

  // workout mode events
  workoutDaySelect.addEventListener("change", () => {
    workoutCurrentExerciseIndex = 0;
    workoutCurrentSet = 1;
    populateWorkoutExerciseList();
    renderWorkoutCurrent();
  });

  workoutModeDate.addEventListener("change", () => {
    const dayKey = workoutDaySelect.value || currentDayKey;
    localStorage.setItem(dateStorageKey(dayKey), workoutModeDate.value);
    if (dayKey === currentDayKey) {
      dateInput.value = workoutModeDate.value;
    }
  });

  finishSetBtn.addEventListener("click", () => {
    const dayKey = workoutDaySelect.value || currentDayKey;
    const dayData = program[dayKey];
    const ex = dayData.exercises[workoutCurrentExerciseIndex];
    const currentStored = parseInt(localStorage.getItem(storageKey(dayKey, workoutCurrentExerciseIndex, "setsDone")) || "0", 10);
    const newVal = Math.min(currentStored + 1, ex.sets);
    localStorage.setItem(storageKey(dayKey, workoutCurrentExerciseIndex, "setsDone"), newVal.toString());
    workoutCurrentSet = Math.min(newVal + 1, ex.sets);
    currentSetLabel.textContent = workoutCurrentSet.toString();
    if (dayKey === currentDayKey) {
      renderDay(dayKey);
    }
  });

  nextExerciseBtn.addEventListener("click", () => {
    const dayKey = workoutDaySelect.value || currentDayKey;
    const dayData = program[dayKey];
    workoutCurrentExerciseIndex = (workoutCurrentExerciseIndex + 1) % dayData.exercises.length;
    workoutCurrentSet = 1;
    renderWorkoutCurrent();
  });

  saveWorkoutWeightBtn.addEventListener("click", () => {
    const dayKey = workoutDaySelect.value || currentDayKey;
    const dayData = program[dayKey];
    const ex = dayData.exercises[workoutCurrentExerciseIndex];
    const weight = workoutWeightInput.value;
    localStorage.setItem(storageKey(dayKey, workoutCurrentExerciseIndex, "weight"), weight);
    const dateStr = workoutModeDate.value || dateInput.value;
    if (dateStr) {
      addHistoryEntry(dayKey, workoutCurrentExerciseIndex, dateStr, weight);
      renderDayHistory(dayKey);
      updateChart();
      renderPRs();
      renderHistoryPage();
    }
    if (dayKey === currentDayKey) {
      renderDay(dayKey);
    }
    alert(`× ×©××¨ ××©×§×œ ${weight} ×§×´×’ ×œ-${ex.name}`);
  });

  startRestBtn.addEventListener("click", () => {
    const seconds = parseInt(restSelect.value || "90", 10);
    startRestTimer(seconds);
  });

  // settings
  loadDefaultRest();
  defaultRestSelect.addEventListener("change", saveDefaultRest);
  resetAllDataBtn.addEventListener("click", resetAllData);

  // initial render
  renderDay(currentDayKey);
  populateWorkoutDaySelect();
  populateWorkoutExerciseList();
  renderWorkoutCurrent();
  renderExerciseLibrary();
  renderHistoryPage();
  renderPRs();
</script>
</body>
</html>
